<table class="table table-hover">
  <tbody>
    <% @categories.each do |category| %>
    <tr>
      <th><%= category.title %></th>
      <th colspan="1", class="category-title"></th>
    </tr>
    <% category.subjects.each do |subject| %>
    <% if subject.id.present? %>
    <tr>
      <td><%= link_to subject.title, subject_path(subject), class: "subject-title" %></td>
      <td class="text-right">
        <button type="button" class="btn btn-outline-info btn-sm" data-toggle="modal" data-target="#modal<%= subject.id %>">
          Edit
        </button>
        <div class="modal fade" id="modal<%= subject.id %>" tabindex="-1" role="dialog" aria-labelledby="label1" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="label1">Modal title</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <%= form_with(model: subject, url: subject_path(subject), method: :put, local: true) do |form| %>
                <div class="form-group">
                  <%= form.text_field :title, placeholder: "input title", class: "form-control" %>
                  <%= form.select :category_id, Category.where(project_id: @project.id).map { |category| [category.title, category.id] }, {}, class: "form-control mt-1" %>
                </div>
              </div>
              <div class="modal-footer">
                <%= form.submit nil, class: "btn btn-info btn-sm"  %>
                <% end %>
                <button type="button" class="btn btn-info btn-sm" data-dismiss="modal">閉じる</button>
              </div>
            </div>
          </div>
        </div>
        <%= link_to 'Destroy', subject_path(subject), method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-outline-info btn-sm" %>
      </td>
    </tr>
    <% end %>
    <% end %>
    <% end %>
  </tbody>
</table>
